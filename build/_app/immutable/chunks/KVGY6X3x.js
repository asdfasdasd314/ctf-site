import{t as g,a as u,n as De,b as Le}from"./6w1StL2M.js";import{af as Ne,h as Oe,u as Pe,o as Te,p as qe,j as _,a as Be,l as o,i as s,c as a,r as e,f as Ge,s as i,t as S,k as Je}from"./Bm_VgG9E.js";import{l as Ye,d as Ke,s as f,e as Qe}from"./8TWQb_4_.js";import{i as y}from"./Cjra9w-q.js";import{e as Re,i as Ue}from"./SK7ny9Sp.js";import{r as We,s as ce}from"./ZKL_xWPK.js";import{p as k}from"./BYUgaS6m.js";import{o as Xe}from"./BLBxmbFV.js";import{g as Ze}from"./BXOo3Ywn.js";function $e(t,v,l=v){var E=Ne();Ye(t,"input",x=>{var c=x?t.defaultValue:t.value;if(c=J(t)?Y(c):c,l(c),E&&c!==(c=v())){var p=t.selectionStart,b=t.selectionEnd;t.value=c??"",b!==null&&(t.selectionStart=p,t.selectionEnd=Math.min(b,t.value.length))}}),(Oe&&t.defaultValue!==t.value||Pe(v)==null&&t.value)&&l(J(t)?Y(t.value):t.value),Te(()=>{var x=v();J(t)&&x===Y(t.value)||t.type==="date"&&!x&&!t.value||x!==t.value&&(t.value=x??"")})}function J(t){var v=t.type;return v==="number"||v==="range"}function Y(t){return t===""?null:+t}var ea=g('<div class="bg-green-200 rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h2 class="text-green-700">Exercise completed!</h2></div></div>'),aa=g('<div class="text-red-500 text-sm"> </div>'),ta=g('<div class="text-emerald-500 text-sm"> </div>'),sa=De('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Submitting...',1),ra=(t,v)=>o(v,!s(v)),ia=g('<div class="flex items-start"><span class="flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-emerald-100 text-emerald-800 font-medium"></span> <p class="ml-3 text-gray-700"> </p></div>'),la=g('<div class="mt-4 space-y-4"></div>'),da=g('<!> <div class="bg-white shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><div class="flex items-center justify-between"><div><h2 class="text-2xl font-bold text-blue-500"><a><u> </u></a></h2> <div class="mt-2 flex items-center space-x-2"><span class="px-2 py-1 text-xs font-medium rounded-full bg-emerald-100 text-emerald-800"> </span> <span class="px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"> </span> <span class="px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800"> </span></div></div> <div class="text-sm text-gray-500"> </div></div></div></div> <div class="bg-white shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h2 class="text-lg font-medium text-gray-900 mb-4">Description</h2> <div class="prose max-w-none"> </div></div></div> <div class="bg-white shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h2 class="text-lg font-medium text-gray-900 mb-4">Link</h2> <div class="prose max-w-none"><a class="text-blue-500"><u>Go solve!</u></a></div></div></div> <div class="bg-white shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h2 class="text-lg font-medium text-gray-900 mb-4">Submit Flag</h2> <form class="space-y-4"><div><label for="flag" class="block text-sm font-medium text-gray-700">Flag</label> <input type="text" id="flag" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm" placeholder="Enter the flag" required></div> <!> <!> <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 disabled:opacity-50"><!></button></form></div></div> <div class="bg-white shadow rounded-lg"><div class="px-4 py-5 sm:p-6"><div class="flex items-center justify-between"><h2 class="text-lg font-medium text-gray-900">Hints</h2> <button class="text-emerald-600 hover:text-emerald-500"> </button></div> <!></div></div>',1),va=g('<div class="bg-white shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h1 class="text-2xl font-bold text-gray-900">Exercise Not Found</h1></div></div>'),oa=g('<div class="min-h-screen bg-gray-100 py-8 px-4 sm:px-6 lg:px-8"><div class="max-w-3xl mx-auto"><!></div></div>');function ba(t,v){qe(v,!0);let l=_(null),E=_(!1),x=_(k([]));Xe(async()=>{const m=await Ze();for(const n of m)n.exerciseId==v.exerciseId&&o(l,k(n));s(l)!==null&&(o(E,!0),o(x,k(s(l).hints)))});let c=_(""),p=_(""),b=_(""),C=_(!1),j=_(!1);async function me(m){m.preventDefault(),o(C,!0),o(p,""),o(b,"");try{const n=await fetch("/api/exercises/validate-flag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({exercise_id:v.exerciseId,flag:s(c)}),credentials:"include"}),h=await n.json();n.status===200?h.success?(o(b,"Congratulations! You solved the challenge!"),s(l).isCompleted=!0):o(p,k(h.err||"Invalid flag")):o(p,k(h.err||"An error occurred"))}catch(n){o(p,"An error occurred while submitting the flag"),console.error("Flag submission error:",n)}finally{o(C,!1)}}var F=oa(),K=a(F),ue=a(K);{var fe=m=>{var n=da(),h=Ge(n);{var pe=r=>{var d=ea();u(r,d)};y(h,r=>{s(l).isCompleted&&r(pe)})}var I=i(h,2),Q=a(I),R=a(Q),H=a(R),A=a(H),M=a(A),U=a(M),_e=a(U,!0);e(U),e(M),e(A);var W=i(A,2),V=a(W),ge=a(V,!0);e(V);var z=i(V,2),be=a(z,!0);e(z);var X=i(z,2),he=a(X);e(X),e(W),e(H);var Z=i(H,2),ye=a(Z);e(Z),e(R),e(Q),e(I);var D=i(I,2),$=a(D),ee=i(a($),2),we=a(ee,!0);e(ee),e($),e(D);var L=i(D,2),ae=a(L),te=i(a(ae),2),ke=a(te);e(te),e(ae),e(L);var N=i(L,2),se=a(N),O=i(a(se),2),P=a(O),re=i(a(P),2);We(re),e(P);var ie=i(P,2);{var Ce=r=>{var d=aa(),w=a(d,!0);e(d),S(()=>f(w,s(p))),u(r,d)};y(ie,r=>{s(p)&&r(Ce)})}var le=i(ie,2);{var Se=r=>{var d=ta(),w=a(d,!0);e(d),S(()=>f(w,s(b))),u(r,d)};y(le,r=>{s(b)&&r(Se)})}var T=i(le,2),Ee=a(T);{var je=r=>{var d=sa();Je(),u(r,d)},Fe=r=>{var d=Le("Submit Flag");u(r,d)};y(Ee,r=>{s(C)?r(je):r(Fe,!1)})}e(T),e(O),e(se),e(N);var de=i(N,2),ve=a(de),q=a(ve),B=i(a(q),2);B.__click=[ra,j];var Ie=a(B,!0);e(B),e(q);var He=i(q,2);{var Ae=r=>{var d=la();Re(d,21,()=>s(x),Ue,(w,Me,Ve)=>{var G=ia(),oe=a(G);oe.textContent=Ve+1;var ne=i(oe,2),ze=a(ne,!0);e(ne),e(G),S(()=>f(ze,s(Me))),u(w,G)}),e(d),u(r,d)};y(He,r=>{s(j)&&r(Ae)})}e(ve),e(de),S(()=>{ce(M,"href",`/exercises/${s(l).exerciseId??""}/start`),f(_e,s(l).title),f(ge,s(l).category),f(be,s(l).difficulty),f(he,`${s(l).points??""} points`),f(ye,`Solved by ${s(l).solveCount??""} users`),f(we,s(l).description),ce(ke,"href",`/exercises/${s(l).exerciseId??""}/start`),T.disabled=s(C),f(Ie,s(j)?"Hide Hints":"Show Hints")}),Qe("submit",O,me),$e(re,()=>s(c),r=>o(c,r)),u(m,n)},xe=m=>{var n=va();u(m,n)};y(ue,m=>{s(l)?m(fe):m(xe,!1)})}e(K),e(F),u(t,F),Be()}Ke(["click"]);export{ba as E};
